#  End-to-End Fraud Detection Pipeline

A production-ready machine learning system that detects fraudulent credit card transactions using **XGBoost**, **FastAPI**, and **Docker**, featuring a real-time **Streamlit** dashboard.

##  System Architecture
- **Backend:** FastAPI service running inside a Docker container.
- **Model:** XGBoost Classifier trained on the Kaggle Credit Card Fraud dataset.
- **Frontend:** Streamlit dashboard providing interactive visualizations (Plotly).
- **Automation:** PowerShell pipeline script for one-command training, testing, and deployment.

---

## Table of Contents
- [System Architecture](#system-architecture)
- [Quickstart](#quickstart)
- [Installation & Setup](#installation--setup)
- [Usage](#usage)
  - [Run the full pipeline (recommended)](#run-the-full-pipeline-recommended)
  - [Run services individually](#run-services-individually)
- [API](#api)
- [Data & Model](#data--model)
- [Testing](#testing)
- [Docker](#docker)
- [Project Structure](#project-structure)
- [Contributing](#contributing)
- [License](#license)

---

## Quickstart 
Get the project running locally in a few steps (assumes Windows + PowerShell):

1. Install Python 3.10+ and Docker.
2. Create and activate a virtual environment:

```powershell
python -m venv .venv
.\.venv\Scripts\Activate.ps1
pip install -r requirements.txt
```

3. Run the full automated pipeline (ingest â†’ preprocess â†’ train â†’ test â†’ build & run Docker):

```powershell
./run_pipeline.ps1
```

4. Open the API docs at: http://localhost:8000/docs
5. Launch the dashboard: `streamlit run frontend/streamlit_app.py`

---

## Installation & Setup 
- Install Python dependencies:

```bash
pip install -r requirements.txt
```

- (Optional) Configure Docker Hub username for automated push inside `run_pipeline.ps1` (change the `$user` variable near the bottom of the script).

---

## Usage

### Run the full pipeline (recommended) 

```powershell
./run_pipeline.ps1
```
This will run the data pipeline, train a model, run unit tests, build a Docker image and run the API container on port `8000`.

### Run services individually
- Start the FastAPI app (development):

```bash
uvicorn app:app --host 0.0.0.0 --port 8000
```

- Start the Streamlit dashboard:

```bash
streamlit run frontend/streamlit_app.py
```

- Re-train model manually:

```bash
python src/ingest_data.py
python src/preprocess.py
python src/train.py
```

---

## API 

### Health check
GET /

Response:
```json
{ "status": "Model is loaded and ready for predictions" }
```

### Predict
POST /predict

Payload (example):
```json
{
  "features": [Time, V1, V2, ..., V28, Amount]
}
```
Example curl:

```bash
curl -X POST http://localhost:8000/predict \
  -H "Content-Type: application/json" \
  -d '{"features": [400, 0.1, -0.2, ..., 0.0, 50.0]}'
```

Successful response contains the predicted class and a fraud probability:
```json
{
  "prediction": "FRAUD" | "NOT FRAUD",
  "fraud_probability": 0.1234,
  "status": "success"
}
```

> ðŸ”§ Note: Input feature order must match training: `Time`, `V1`â€“`V28`, `Amount` (total 30 features).

---

## Data & Model 
- Raw data: `data/raw/creditcard.csv` (sourced from Kaggle's Credit Card Fraud dataset).
- Processed data: `data/processed/` (generated by `src/preprocess.py`). These files are git-ignored.
- Trained artifacts are saved to `models/` (e.g., `fraud_model.json`, `scaler.pkl`).

If you want to refresh the data and retrain the model, run the ingest/preprocess/train scripts in that order.

---

## Testing 
Run unit tests with pytest:

```bash
pytest tests/
```

The test suite covers data generation, feature shape, and model/scaler artifacts.

---

## Docker 
- Build locally:

```bash
docker build -t fraud-detection-api .
```

- Run container:

```bash
docker run -d --name fraud-detection-app -p 8000:8000 fraud-detection-api
```

- The included `run_pipeline.ps1` automates the build, run, and optional push to Docker Hub (update `$user` before running push).

---

## Project Structure
```text
â”œâ”€â”€ data/             # Raw and processed datasets (Git-ignored)
â”œâ”€â”€ models/           # Saved model artifacts (JSON/PKL)
â”œâ”€â”€ src/              # Python scripts for ingestion, preprocessing, training
â”œâ”€â”€ tests/            # Pytest unit tests for data and model validation
â”œâ”€â”€ frontend/         # Streamlit dashboard code
â”œâ”€â”€ app.py            # FastAPI backend logic
â”œâ”€â”€ Dockerfile        # Container configuration
â””â”€â”€ run_pipeline.ps1  # Full automation script
```

---

## Contributing 
- Add issues or feature requests on GitHub.
- Fork, create a feature branch, add tests for new behavior, and open a PR with a clear description.

---

## License
MIT License

---

## Acknowledgements
- Kaggle Credit Card Fraud Detection dataset
- XGBoost, FastAPI, and Streamlit

---

